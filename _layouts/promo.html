<!DOCTYPE html>
<html lang="en">

<head>

    {% include head.html %}

</head>

<body>

    <!-- Site Header -->
    {% include mobile-nav.html %}

    {{content}}

    <!-- Footer -->
    {% include site-footer.html %}

    <!-- Cookie Banner -->
    {% include cookie-banner.html %}

    <!-- Alpine -->
    <script src="//unpkg.com/alpinejs" defer></script>

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"
        integrity="sha512-AFwxAkWdvxRd9qhYYp1qbeRZj6/iTNmJ2GFwcxsMOzwwTaRwz2a/2TX225Ebcj3whXte1WGQb38cXE5j7ZQw3g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Magnific Popup core JS file -->
    <script src="/magnific-popup/jquery.magnific-popup.js"></script>

    <!-- Slick -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"
        integrity="sha512-XtmMtDEcNz2j7ekrtHvOVR4iwwaD6o/FUJe6+Zq+HgcCsk3kj4uSQQR8weQ2QVj1o0Pk6PwYLohm206ZzNfubg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Javascript  -->
    <script src="/main.js" defer></script>

    <!-- Single Modal Structure for All Buttons -->
<div id="videoModal" class="modal" style="display: none;">
    <div id="modalContent" class="modal-content">
        <span class="close" style="cursor: pointer;">&times;</span>
        <iframe 
          id="modalIframe" 
          frameborder="0" 
          allowfullscreen 
          class="w-full min-h-[80vh] rounded-none">
        </iframe>
    </div>
</div>

<!-- JavaScript to handle modals -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const videoModal = document.getElementById('videoModal');
        const modalContent = document.getElementById('modalContent');
        const modalIframe = document.getElementById('modalIframe');
        const closeBtn = videoModal.querySelector('.close');

        // Event delegation for all modal-trigger buttons
        document.addEventListener('click', function (event) {
            if (event.target.classList.contains('modal-trigger')) {
                // Get video URL from data-src attribute
                const videoSrc = event.target.getAttribute('data-src');
                modalIframe.src = videoSrc;

                // Set dimensions based on button type
                if (event.target.classList.contains('video-button')) {
                    // YouTube-style iframe
                    modalContent.style.width = '560px';
                    modalContent.style.maxHeight = '315px';
                } else {
                    // SamCart-style landscape rectangle
                    modalContent.style.width = '800px';
                    modalContent.style.maxHeight = '80vh';
                }

                // Show modal
                videoModal.style.display = 'block';
            }
        });

        // Close Modal and Clear Video
        closeBtn.addEventListener('click', function () {
            videoModal.style.display = 'none';
            modalIframe.src = ''; // Clear src to stop video playback
        });

        // Optional: Close modal on outside click
        videoModal.addEventListener('click', function (event) {
            if (event.target === videoModal) {
                videoModal.style.display = 'none';
                modalIframe.src = ''; // Clear src
            }
        });
    });
</script>



</body>


</body>

</html>